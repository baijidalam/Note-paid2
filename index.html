<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Read-Only Note</title>
<style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    textarea { width: 100%; height: 200px; }
    #noteDisplay { white-space: pre-wrap; border: 1px solid #ccc; padding: 10px; margin-top: 20px; }
</style>
</head>
<body>

<div id="writeSection">
    <h2>Write Your Note</h2>
    <textarea id="noteInput" placeholder="Type something..."></textarea><br>
    <button onclick="publish()">Publish</button>
    <p id="linkArea"></p>
</div>

<div id="viewSection" style="display:none;">
    <h2>Read-Only Note</h2>
    <div id="noteDisplay"></div>
</div>

<script>
// Check if there is a hash in URL (view mode)
if(window.location.hash.startsWith("#note=")) {
    document.getElementById('writeSection').style.display = "none";
    document.getElementById('viewSection').style.display = "block";

    const encoded = window.location.hash.replace("#note=", "");
    const text = decodeURIComponent(atob(encoded)); // decode Base64
    document.getElementById('noteDisplay').innerText = text;
}

function publish() {
    const text = document.getElementById('noteInput').value.trim();
    if(!text) { alert("Write something first!"); return; }

    const encoded = btoa(text); // encode to Base64
    const link = window.location.origin + window.location.pathname + "#note=" + encoded;

    document.getElementById('linkArea').innerHTML = `Share this link: <a href="${link}" target="_blank">${link}</a>`;
}
</script>

</body>
</html>
